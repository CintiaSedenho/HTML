
<script>
  (function(w,d,s,l,i){
    w[l]=w[l]||[];
    w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),
        dl=l!='dataLayer'?'&l='+l:'';
    j.async=true;
    j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'&gtm_auth=&gtm_preview=&gtm_cookies_win=x';
    f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-XXXXXXXX');
</script>

✅ Função Autoexecutável (IIFE):
(function(w,d,s,l,i){ ... })(window,document,'script','dataLayer','GTM-XXXXXXXX');

É uma função anônima autoexecutável (IIFE = Immediately Invoked Function Expression).
Ela é chamada imediatamente com os seguintes parâmetros:
w: window
d: document
s: 'script'
l: 'dataLayer' (nome da camada de dados)
i: 'GTM-XXXXXXXX' (ID do contêiner GTM)

w[l] = w[l] || []; //Se a dataLayer ainda não existir, ela é inicializada como um array.
w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'}); 
As informações sobre o início da execução (gtm.start) é empurrado para ela.
gtm.start registra o timestamp de início.
event: 'gtm.js' indica que o carregamento do GTM começou.

var f = d.getElementsByTagName(s)[0], // f é o primeiro <script> da página (usado como referência).
    j = d.createElement(s), // j é um novo elemento <script> criado dinamicamente.
    dl = l != 'dataLayer' ? '&l=' + l : ''; // dl adiciona o parâmetro &l=dataLayer se você estiver usando um nome de dataLayer diferente.

j.async = true;
j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl + '&gtm_auth=&gtm_preview=&gtm_cookies_win=x';
O src define a URL do script do GTM, com parâmetros opcionais para preview/debug (aqui estão vazios).

f.parentNode.insertBefore(j,f); // O novo script (j) é inserido antes do primeiro <script> existente na página (f).
Isso garante que ele seja carregado e executado rapidamente.

+'&gtm_auth=&gtm_preview=&gtm_cookies_win=x'
⚠️ Sobre os parâmetros de debug: Esses parâmetros estão em branco, o que indica que o GTM não está em modo de visualização/debug. 
Eles seriam preenchidos automaticamente se você estivesse usando o modo de pré-visualização do GTM para testar alterações antes de publicá-las.

